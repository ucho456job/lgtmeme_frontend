"use strict";(self.webpackChunklgtmeme=self.webpackChunklgtmeme||[]).push([[497],{"./src/app/ImageGallery.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>ImageGallery_stories});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),Button=__webpack_require__("./src/components/atoms/Button/Button.tsx"),InputText=__webpack_require__("./src/components/atoms/InputText/InputText.tsx"),Loading=__webpack_require__("./src/components/atoms/Loading/Loading.tsx"),Tabs=__webpack_require__("./src/components/atoms/Tabs/Tabs.tsx"),ImageCard=__webpack_require__("./src/components/molecules/ImageCard/ImageCard.tsx"),SearchSvg=__webpack_require__("./src/components/svgs/SearchSvg.tsx"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js");var toPropertyKey=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(0,toPropertyKey.Z)(descriptor.key),descriptor)}}var ImageService=function(_sendRequest,_fetchImages){function ImageService(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ImageService),(0,defineProperty.Z)(this,"baseUrl",void 0),this.baseUrl="http://localhost:3000"}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ImageService,[{key:"createConfig",value:function createConfig(method,cache){return{method,cache,headers:{"Content-Type":"application/json"}}}},{key:"sendRequest",value:function sendRequest(_x,_x2,_x3){return(_sendRequest=_sendRequest||(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(path,config,query){var url,res,data;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return url=new URL(path,this.baseUrl),query&&Object.entries(query).forEach((function(_ref){var _ref2=(0,slicedToArray.Z)(_ref,2),key=_ref2[0],value=_ref2[1];url.searchParams.append(key,String(value))})),_context.next=4,fetch(url.toString(),config);case 4:return res=_context.sent,_context.next=7,res.json();case 7:return data=_context.sent,_context.abrupt("return",data);case 9:case"end":return _context.stop()}}),_callee,this)})))).apply(this,arguments)}},{key:"fetchImages",value:function fetchImages(_x4){return(_fetchImages=_fetchImages||(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee2(queryOption){var _queryOption$page,page,_queryOption$keyword,keyword,_queryOption$activeTa,activeTabId,_queryOption$favarite,query,config,res;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _queryOption$page=queryOption.page,page=void 0===_queryOption$page?0:_queryOption$page,_queryOption$keyword=queryOption.keyword,keyword=void 0===_queryOption$keyword?"":_queryOption$keyword,_queryOption$activeTa=queryOption.activeTabId,activeTabId=void 0===_queryOption$activeTa?"timeLine":_queryOption$activeTa,_queryOption$favarite=queryOption.favariteImageIds,query={page,keyword,activeTabId,favariteImageIds:void 0===_queryOption$favarite?[]:_queryOption$favarite},config=this.createConfig("GET","no-store"),_context2.next=5,this.sendRequest("/api/images",config,query);case 5:return res=_context2.sent,_context2.abrupt("return",res.images);case 7:case"end":return _context2.stop()}}),_callee2,this)})))).apply(this,arguments)}}]),ImageService}(),css=__webpack_require__("./styled-system/css/index.mjs"),__jsx=react.createElement,ImageGallery=function ImageGallery(_ref){var _ref2,css=_ref.css,initImages=_ref.initImages,_useState=(0,react.useState)([]),images=_useState[0],setImages=_useState[1],_useState2=(0,react.useState)([]),favariteImageIds=_useState2[0],setFavariteImageIds=_useState2[1],_useState3=(0,react.useState)("timeLine"),activeTabId=_useState3[0],setActiveTabId=_useState3[1],_useState4=(0,react.useState)(""),keyword=_useState4[0],setKeyword=_useState4[1],_useState5=(0,react.useState)(0),page=_useState5[0],setPage=_useState5[1],_useState6=(0,react.useState)(!1),isFull=_useState6[0],setIsFull=_useState6[1],_useState7=(0,react.useState)(!0),isLoading=_useState7[0],setIsLoading=_useState7[1];(0,react.useEffect)((function(){setImages(initImages);var favariteImageIds=JSON.parse(localStorage.getItem("favariteImageIds")||"[]");setFavariteImageIds(favariteImageIds),setIsLoading(!1)}),[initImages]);var handleFetchImages=function handleFetchImages(_x,_x2,_x3,_x4,_x5){return(_ref2=_ref2||(0,asyncToGenerator.Z)(regenerator_default().mark((function _callee(images,page,keyword,activeTabId,favariteImageIds){var service,resImages,imageMap;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,setIsLoading(!0),setPage(page),setActiveTabId(activeTabId),service=new ImageService,_context.next=7,service.fetchImages({page,keyword,activeTabId,favariteImageIds});case 7:resImages=_context.sent,0===page?setImages(resImages):(imageMap=new Map,images.forEach((function(image){return imageMap.set(image.id,image)})),resImages.forEach((function(image){return imageMap.set(image.id,image)})),setImages(Array.from(imageMap.values()))),resImages.length<9&&setIsFull(!0),_context.next=14;break;case 12:_context.prev=12,_context.t0=_context.catch(0);case 14:return _context.prev=14,setIsLoading(!1),_context.finish(14);case 17:case"end":return _context.stop()}}),_callee,null,[[0,12,14,17]])})))).apply(this,arguments)};return __jsx("div",{className:css},__jsx(Tabs.Z,{css:tabCss,tabs:[{id:"timeLine",label:"Time line"},{id:"popular",label:"Popular"},{id:"favorite",label:"Favorite"}],value:activeTabId,onClick:function onClick(id){setIsFull(!1),setImages([]),handleFetchImages(images,0,keyword,id,favariteImageIds)}}),__jsx(InputText.Z,{css:textBoxCss,value:keyword,placeholder:"Keyword",icon:__jsx(SearchSvg.Z,null),onChange:function handleSetKeyword(value){return setKeyword(value)},onEnterPress:function onEnterPress(){setIsFull(!1),setImages([]),handleFetchImages(images,0,keyword,activeTabId,favariteImageIds)}}),__jsx("div",{className:imageCardsCss},images.map((function(i){return __jsx(ImageCard.Z,{css:imageCardCss,key:i.id,image:i,favariteImageIds,setFavariteImageIds})}))),isLoading?__jsx(Loading.Z,{css:loadingCss}):__jsx(Button.Z,{css:buttonCss,size:"lg",disabled:isFull,onClick:function onClick(){return handleFetchImages(images,page+1,keyword,activeTabId,favariteImageIds)}},"See more"))};ImageGallery.displayName="ImageGallery";var tabCss=(0,css.iv)({paddingTop:"8",paddingBottom:"4"}),textBoxCss=(0,css.iv)({paddingBottom:"8"}),imageCardsCss=(0,css.iv)({display:"grid",gap:"10px",lg:{gridTemplateColumns:"1fr 1fr 1fr"},md:{gridTemplateColumns:"1fr 1fr"},sm:{gridTemplateColumns:"1fr"}}),imageCardCss=(0,css.iv)({marginX:"auto"}),buttonCss=(0,css.iv)({paddingY:"30px",textAlign:"center"}),loadingCss=(0,css.iv)({marginTop:"30px",marginX:"auto"});ImageGallery.__docgenInfo={description:"",methods:[],displayName:"ImageGallery",props:{css:{required:!1,tsType:{name:"string"},description:""},initImages:{required:!0,tsType:{name:"Array",elements:[{name:"FetchImage"}],raw:"FetchImage[]"},description:""}}};const app_ImageGallery=ImageGallery;try{ImageGallery.displayName="ImageGallery",ImageGallery.__docgenInfo={description:"",displayName:"ImageGallery",props:{css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"string"}},initImages:{defaultValue:null,description:"",name:"initImages",required:!0,type:{name:"FetchImage[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/app/ImageGallery.tsx#ImageGallery"]={docgenInfo:ImageGallery.__docgenInfo,name:"ImageGallery",path:"src/app/ImageGallery.tsx#ImageGallery"})}catch(__react_docgen_typescript_loader_error){}var _Default$parameters,_Default$parameters2;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const ImageGallery_stories={title:"app/ImageGallery",component:app_ImageGallery};var Default={args:{css:(0,css.iv)({maxWidth:"1090px",margin:"auto"}),initImages:[{id:1,url:"https://placehold.jp/300x300.png",width:300,height:300},{id:2,url:"https://placehold.jp/300x300.png",width:300,height:300},{id:3,url:"https://placehold.jp/300x300.png",width:300,height:300},{id:4,url:"https://placehold.jp/300x300.png",width:300,height:300},{id:5,url:"https://placehold.jp/300x300.png",width:300,height:300},{id:6,url:"https://placehold.jp/300x300.png",width:300,height:300}]}};Default.parameters=_objectSpread(_objectSpread({},Default.parameters),{},{docs:_objectSpread(_objectSpread({},null===(_Default$parameters=Default.parameters)||void 0===_Default$parameters?void 0:_Default$parameters.docs),{},{source:_objectSpread({originalSource:'{\n  args: {\n    css: css({\n      maxWidth: "1090px",\n      margin: "auto"\n    }),\n    initImages: [{\n      id: 1,\n      url: "https://placehold.jp/300x300.png",\n      width: 300,\n      height: 300\n    }, {\n      id: 2,\n      url: "https://placehold.jp/300x300.png",\n      width: 300,\n      height: 300\n    }, {\n      id: 3,\n      url: "https://placehold.jp/300x300.png",\n      width: 300,\n      height: 300\n    }, {\n      id: 4,\n      url: "https://placehold.jp/300x300.png",\n      width: 300,\n      height: 300\n    }, {\n      id: 5,\n      url: "https://placehold.jp/300x300.png",\n      width: 300,\n      height: 300\n    }, {\n      id: 6,\n      url: "https://placehold.jp/300x300.png",\n      width: 300,\n      height: 300\n    }]\n  }\n}'},null===(_Default$parameters2=Default.parameters)||void 0===_Default$parameters2||null===(_Default$parameters2=_Default$parameters2.docs)||void 0===_Default$parameters2?void 0:_Default$parameters2.source)})})},"./src/components/atoms/InputText/InputText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_styled_system_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./styled-system/css/index.mjs"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,TextBox=function TextBox(_ref){var css=_ref.css,value=_ref.value,placeholder=_ref.placeholder,icon=_ref.icon,onChange=_ref.onChange,onEnterPress=_ref.onEnterPress,inputRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return __jsx("div",{className:css},__jsx("div",{className:textBoxWrapCss},__jsx("input",{ref:inputRef,type:"text",value,className:textBoxCss({icon:!!icon}),placeholder,onChange:function handleOnChange(e){onChange(e.target.value)},onKeyDown:function handleKeyDown(e){"Enter"===e.key&&inputRef.current&&(!("true"===inputRef.current.getAttribute("composition"))&&onEnterPress&&onEnterPress())},onCompositionStart:function onCompositionStart(){var _inputRef$current;return null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current?void 0:_inputRef$current.setAttribute("composition","true")},onCompositionEnd:function onCompositionEnd(){var _inputRef$current2;return null===(_inputRef$current2=inputRef.current)||void 0===_inputRef$current2?void 0:_inputRef$current2.removeAttribute("composition")}}),__jsx("div",{className:iconCss},icon)))};TextBox.displayName="TextBox";var textBoxWrapCss=(0,_styled_system_css__WEBPACK_IMPORTED_MODULE_1__.iv)({position:"relative",width:"100%"}),textBoxCss=(0,_styled_system_css__WEBPACK_IMPORTED_MODULE_1__.jS)({base:{width:"100%",paddingY:"2",paddingX:"2.5",border:"1px solid #cccccc",borderRadius:"lg",color:"BLACK",position:"relative",_focus:{outline:"solid 1px #e0e7ff"}},variants:{icon:{true:{paddingLeft:"9"}}}}),iconCss=(0,_styled_system_css__WEBPACK_IMPORTED_MODULE_1__.iv)({position:"absolute",top:"2",left:2});TextBox.__docgenInfo={description:"",methods:[],displayName:"TextBox",props:{css:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},icon:{required:!1,tsType:{name:"JSX.Element"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{name:"value",type:{name:"string"}}],return:{name:"void"}}},description:""},onEnterPress:{required:!1,tsType:{name:"Function"},description:""}}};const __WEBPACK_DEFAULT_EXPORT__=TextBox;try{InputText.displayName="InputText",InputText.__docgenInfo={description:"",displayName:"InputText",props:{css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"Element"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onEnterPress:{defaultValue:null,description:"",name:"onEnterPress",required:!1,type:{name:"Function"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/InputText/InputText.tsx#InputText"]={docgenInfo:InputText.__docgenInfo,name:"InputText",path:"src/components/atoms/InputText/InputText.tsx#InputText"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/atoms/Loading/Loading.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var __jsx=__webpack_require__("./node_modules/next/dist/compiled/react/index.js").createElement,Loading=function Loading(_ref){var css=_ref.css;return __jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"48",height:"48",fill:"#292524",className:css,"data-testid":"loading"},__jsx("circle",{cx:"12",cy:"3",r:"3"},__jsx("animate",{attributeName:"cx",values:"12;21;3;12",calcMode:"linear",dur:"2.2s",repeatCount:"indefinite"}),__jsx("animate",{attributeName:"cy",values:"3;21;21;3",calcMode:"linear",dur:"2.2s",repeatCount:"indefinite"})),__jsx("circle",{cx:"21",cy:"21",r:"3"},__jsx("animate",{attributeName:"cx",values:"21;3;12;21",calcMode:"linear",dur:"2.2s",repeatCount:"indefinite"}),__jsx("animate",{attributeName:"cy",values:"21;21;3;21",calcMode:"linear",dur:"2.2s",repeatCount:"indefinite"})),__jsx("circle",{cx:"3",cy:"21",r:"3"},__jsx("animate",{attributeName:"cx",values:"3;12;21;3",calcMode:"linear",dur:"2.2s",repeatCount:"indefinite"}),__jsx("animate",{attributeName:"cy",values:"21;3;21;21",calcMode:"linear",dur:"2.2s",repeatCount:"indefinite"})))};Loading.displayName="Loading",Loading.__docgenInfo={description:"",methods:[],displayName:"Loading",props:{css:{required:!1,tsType:{name:"string"},description:""}}};const __WEBPACK_DEFAULT_EXPORT__=Loading;try{Loading.displayName="Loading",Loading.__docgenInfo={description:"",displayName:"Loading",props:{css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/Loading/Loading.tsx#Loading"]={docgenInfo:Loading.__docgenInfo,name:"Loading",path:"src/components/atoms/Loading/Loading.tsx#Loading"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/atoms/Tabs/Tabs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_styled_system_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./styled-system/css/index.mjs"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,Tabs=function Tabs(_ref){var css=_ref.css,tabs=_ref.tabs,value=_ref.value,onClick=_ref.onClick,handleClick=function handleClick(value){return onClick(value)};return __jsx("div",{className:css},__jsx("div",{className:tabsCss},tabs.map((function(tab){return __jsx("div",{key:tab.id,className:tabRecipe({active:tab.id===value}),onClick:function onClick(){return handleClick(tab.id)}},tab.label)}))))};Tabs.displayName="Tabs";var tabsCss=(0,_styled_system_css__WEBPACK_IMPORTED_MODULE_1__.iv)({display:"flex",width:"100%",boxShadow:"lg"}),tabRecipe=(0,_styled_system_css__WEBPACK_IMPORTED_MODULE_1__.jS)({base:{flex:1,padding:"3",cursor:"pointer",bgColor:"WHITE",color:"BLACK",textAlign:"center",opacity:"0.8"},variants:{active:{true:{fontWeight:"bold",borderBottom:"2px solid",borderBottomColor:"BLACK",opacity:"1"}}}});Tabs.__docgenInfo={description:"",methods:[],displayName:"Tabs",props:{css:{required:!1,tsType:{name:"string"},description:""},tabs:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string;\n  label: string;\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{\n  id: string;\n  label: string;\n}[]"},description:""},value:{required:!0,tsType:{name:"string"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{name:"value",type:{name:"string"}}],return:{name:"void"}}},description:""}}};const __WEBPACK_DEFAULT_EXPORT__=Tabs;try{Tabs.displayName="Tabs",Tabs.__docgenInfo={description:"",displayName:"Tabs",props:{css:{defaultValue:null,description:"",name:"css",required:!1,type:{name:"string"}},tabs:{defaultValue:null,description:"",name:"tabs",required:!0,type:{name:"{ id: string; label: string; }[]"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"(value: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/atoms/Tabs/Tabs.tsx#Tabs"]={docgenInfo:Tabs.__docgenInfo,name:"Tabs",path:"src/components/atoms/Tabs/Tabs.tsx#Tabs"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/svgs/SearchSvg.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_styled_system_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./styled-system/css/index.mjs"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,SearchSvg=function SearchSvg(){return __jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"#292524",className:svgCss},__jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}))};SearchSvg.displayName="SearchSvg";var svgCss=(0,_styled_system_css__WEBPACK_IMPORTED_MODULE_1__.iv)({width:"25px",height:"25px"});SearchSvg.__docgenInfo={description:"",methods:[],displayName:"SearchSvg"};const __WEBPACK_DEFAULT_EXPORT__=SearchSvg}}]);